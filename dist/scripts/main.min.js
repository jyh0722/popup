$.fn.yhPopup=function(n){$(this).each(function(){if(!$(this).hasClass("popup-container"))return!1;function e(){t.show=!1,$("body").removeClass("popup-open"),t.$el.removeClass("active"),t.$focus.focus(),t.$el.data("yhPopupConfig",t)}var o,t,a;o=$(this),t=function(o){var e,t=n;void 0===n||"show"===n?t={show:!0}:"hide"===n?t={show:!1}:"toggle"===n&&(t={show:!o.$el.hasClass("active")});return e=$.extend({},o,o.$el.data(),t),console.log(o,o.$el.data(),t),e}({show:!1,keyboard:!0,backdrop:!0,$el:o,$focus:$(":focus")}),a=t.$el.find("button, input, a, textarea"),t.$el.data({yhPopupConfig:t}),t.show?(t.show=!0,$("body").addClass("popup-open"),t.$el.addClass("active"),setTimeout(function(){a.first().focus()},0),t.$el.data("yhPopupConfig",t)):e(),t.backdrop?t.$el.on("click",function(o){t.$el.find(".pop-wrap").find("*").hasClass(o.target.className)||t.$el.find(".pop-wrap").hasClass(o.target.className)||(o.preventDefault(),e())}):t.$el.off("click"),t.keyboard&&t.$el.on("keydown",function(o){27==o.keyCode&&e()}),a.last().on("keydown",function(o){9!=o.keyCode||o.shiftKey||(o.preventDefault(),a.first().focus())}),a.first().on("keydown",function(o){9==o.keyCode&&o.shiftKey&&(o.preventDefault(),a.last().focus())}),t.$el.find(".btn-close").on("click",function(){e()})})},$(function(){$("a[data-toggle='popup'], button[data-toggle='popup']").on("click",function(o){o.preventDefault();var e=$(this).attr("data-target");$(e).yhPopup("toggle")})});